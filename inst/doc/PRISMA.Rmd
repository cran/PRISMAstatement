---
title: "Make a PRISMA flow chart"
author: "Jack O. Wasey"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
bibliography: PRISMA.bib
vignette: >
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteIndexEntry{Make a PRISMA flow chart}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
suppressPackageStartupMessages(library(DiagrammeR))
```

# The PRISMA Statement

This package plots a [PRISMA](http://prisma-statement.org/) flow chart
    describing the identification, screening, eligibility and inclusion or studies in
    systematic reviews. PRISMA is an evidence-based minimum set of items for reporting
    in systematic reviews and meta-analyses. PRISMA focuses on the reporting of reviews
    evaluating randomized trials, but can also be used as a basis for reporting
    systematic reviews of other types of research, particularly evaluations of
    interventions. [@moher_preferred_2009]

# Generate a PRISMA flow chart

```{r prisma}
library(PRISMAstatement)

prisma(found = 750,
       found_other = 123,
       no_dupes = 776, 
       screened = 776, 
       screen_exclusions = 13, 
       full_text = 763,
       full_text_exclusions = 17, 
       qualitative = 746, 
       quantitative = 319,
       width = 800, height = 800)
```

# Take care modifying the width, height and DPI

For publication quality graphics, a certain number of DPI is often requested. This is difficult to achieve with the chain of tools that PRISMAstatement uses (DiagrammeR, htmlwidgets), and also affected by the output container which may be a PDF vignette, file, browser window, etc..

```{r prismadpi1, fig.cap="just set width and height"}
prisma(found = 750,
       found_other = 123,
       no_dupes = 776, 
       screened = 776, 
       screen_exclusions = 13, 
       full_text = 763,
       full_text_exclusions = 17, 
       qualitative = 746, 
       quantitative = 319,
       width = 200, height = 200)
```

```{r prismadpi2, fig.cap="same width and height but DPI increased to 300"}
prisma(found = 750,
       found_other = 123,
       no_dupes = 776, 
       screened = 776, 
       screen_exclusions = 13, 
       full_text = 763,
       full_text_exclusions = 17, 
       qualitative = 746, 
       quantitative = 319,
       width = 200, height = 200,
       dpi = 300)
```

```{r prismadpi3, fig.cap="same width and height but DPI decreased to 36"}
prisma(found = 750,
       found_other = 123,
       no_dupes = 776, 
       screened = 776, 
       screen_exclusions = 13, 
       full_text = 763,
       full_text_exclusions = 17, 
       qualitative = 746, 
       quantitative = 319,
       width = 200, height = 200,
       dpi = 36)
```

My recommendation is to leave DPI at the default (72), and change the canvas size to achieve the correct number of pixels to fit the width of your target document. Tweaking the DPI may help (or cause) clipping.

# References
